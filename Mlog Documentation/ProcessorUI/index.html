<!DOCTYPE html>
<html lang="en" spellcheck="false">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Processor UI</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="script.js"></script>
</head>
<body>
    <!-- TODO add more keybinds (selectable instruction using arrow keys, tab(and or arrows) to cycle fields on selected instruction, move/drag selected instruction 
    delete selected instruction, add instruction below or above selected instruction ) -->
    <!-- TODO create lable block for jump instruction -->
    <!-- TODO allow saving and loading codes using localStorage, maybe make a menu for it -->
    <!-- TODO extra optional instruction; while; for; long operation; -->
    <div id="debugText" style="color: white; position: fixed; top: 0px; left: 1px; z-index: 10;">
        debug text
    </div>
    <div id="debugText2" style="color: white; position: fixed; top: 15px; left: 1px; z-index: 10;">
        debug text
    </div>
    <div id="debugText3" style="color: white; position: fixed; top: 30px; left: 1px; z-index: 10;">
        debug text
    </div>
    <div id="debugText4" style="color: white; position: fixed; top: 45px; left: 1px; z-index: 10;">
        debug text
    </div>
    <div id="debugText5" style="color: white; position: fixed; top: 60px; left: 1px; z-index: 10;">
        debug text
    </div>
    <div id="debugText6" style="color: white; position: fixed; top: 75px; left: 1px; z-index: 10;">
        debug text
    </div>
    <div id="debugText7" style="color: white; position: fixed; top: 90px; left: 1px; z-index: 10;">
        debug text
    </div>
    <div id="debugText8" style="color: white; position: fixed; top: 105px; left: 1px; z-index: 10;">
        debug text
    </div>
    <div id="debugText9" style="color: white; position: fixed; top: 120px; left: 1px; z-index: 10;">
        debug text
    </div>
    <div style="position: fixed; color: rgba(255, 0, 0, 0.185); font-size: calc(10px + 1vw); text-align: center; user-select: none; overflow-wrap: break-word; top: 50%;left: 50%;transform: translate(-50%, -50%);">
        As this is a rather large project I cannot be absolutely sure
        that there are no bugs, if you think something is not right
        whether its not intuitive, weird design, or unuseable for any reason
        don't hesitate to contact me (Discord : Yruei)
    </div>
    <div class="alert alertShow" id="alert">
        Code Copied to clipboard!
    </div>
    <div class="alert alertShow" id="alert1">
        Unable to read clipboard...
        <br>
        Paste manually instead? <button class="button" id="pasteManually" onclick="openPasteMenu()" style="font-size: 0.8em; border: 3px gray solid;">Paste manually</button>
    </div>
    <div id="pasteMenu" class="menu" onclick="closePasteMenu(1,event)" >
        <div class="pasteMenu" style="text-align: center;">
            <span>Paste your code here <br></span>
            <textarea contenteditable="true" class="pasteBox" placeholder="asdfasdfadf" id="pasteBox"></textarea> <br>
            <button class="button" id="pasteManually" onclick="importCode(1)" style="font-size: 1em;">Import</button>
        </div>
    </div>
    <div id="loadingAlert" class="menu" style="display: block;">
        <div class="loading">
            Loading.... 
            <br>
            Please Wait...
            <div class="loadingSub">
                This should be faster the second time you open this
            </div>
        </div>
    </div>
    <div id="saveMenu" class="menu" onclick="closeSaveMenu(1,event)">
        <div class="saveMenu">
            <div style="display: flex; flex-direction: row;">
                <div>
                    <span>Saved Code : </span>
                </div>
                <div>
                    <input type="text" id="searchBar" class="searchBox" placeholder="Search...">
                </div>
            </div>
            <div id="saveList" class="saveList">
            </div>
            <div id="name" class="menu" onclick="closeNameMenu(1,event)">
                <div class="saveMenu" style="padding: 1vw;">
                    <div>Save Code</div>
                    <textarea name="Name" id="Name" placeholder="Enter Name" class="nameBox"></textarea><br><br>
                    <button class="button" id="Save" onclick="saveCurrent()" style="font-size: 1em; padding: 5px;">save</button>
                </div>
            </div>
            <div style="text-align: center;">
                <button class="button smallButton" id="saveCurrent" onclick="openNameMenu()">Save Current</button>
                <button class="button smallButton" id="loadSelected" onclick="loadSelected()">Load Selected</button>
                <button class="button smallButton" id="deleteSelected" onclick="deleteSelected()">Delete Selected</button>
                <button class="button smallButton" id="saveCurrent" onclick="openTimelineMenu()">Timeline</button>
            </div>
        </div>
    </div>
    <!-- TODO add a setting menu, autosave = bool, interval = int, size = int-->
    <div id="timeline" class="menu" onclick="closeTimelineMenu(1,event)">
        <div id="timelineList" class="saveList timelineList">
        </div>
    </div>
    <div id="autosaveIcon" class="Icon autosaveIcon">
        <img src="image/save.png" alt="">
    </div>
    <div id="settingIcon" class="Icon settingIcon">
        <img src="image/settings.png" alt="" onclick="openSettingMenu()">
    </div>
    <div id="setting" class="menu" onclick="closeSettingMenu(1,event)">
        <div class="saveMenu">
            <div>
                <div>Autosave</div>
                <div class="checkBoxContainer">
                    <input type="checkbox" id="autosave"/>
                    <label for="autosave">Autosave</label>
                </div>
                <div class="sliderContainer">
                    <input type="range" id="interval" data-suffix="s" name="slider" min="2" max="180" step="1" oninput="updateSettingValue(this)">
                    <div class="value">10s</div>
                    <div class="name">Interval</div>
                </div>
                <div class="sliderContainer">
                    <input type="range" id="buffer" data-suffix="" name="slider" min="10" max="500" step="1" oninput="updateSettingValue(this)">
                    <div class="value">100</div>
                    <div class="name">Buffer</div>
                </div>
                <div>Settings</div>
                <div class="checkBoxContainer">
                    <input type="checkbox" id="customCheckbox"/>
                    <label for="customCheckbox">Custom Checkbox</label>
                </div>
                <div class="checkBoxContainer">
                    <input type="checkbox" id="customCheckbox"/>
                    <label for="customCheckbox">Custom Checkbox</label>
                </div>
                <div class="checkBoxContainer">
                    <input type="checkbox" id="customCheckbox"/>
                    <label for="customCheckbox">Custom Checkbox</label>
                </div>
                <button class="button smallButton" id="saveCurrent" onclick="saveSettings()">Save</button>
            </div>
        </div>
    </div>
    <div id="helpMenu" class="menu" onclick="closeHelpWizard()">
        <div class="helpContent">
            <div style="text-align: center;">
                <h1 style="margin: 0;">Help</h1>
                (Click anywhere to close)
                <hr>
            </div>
            <p>
                Welcome to the Processor UI, a enchanced visual IDE for Mindustry Logic. 
                <br>
                This tool amplifies the experience of creating code for the Processor block while preserving the game's block-like visuals.
                <br>
                <br>
                <span style="background-color: red;">(STILL WORK IN PROGRESS)</span>
            </p>
            <ul>
                <h3>Keybinds</h3>
                <li>F1 : Open Help Menu</li>
                <li>F2 : Open add Menu</li>
                    <ul>
                        <li>1 : Read</li>
                        <li>2 : Write</li>
                        <li>3 : Draw</li>
                        <li>4 : Print</li>
                        <li>5 : Format</li>
                        <li>Q : Draw Flush</li>
                        <li>W : Print Flush</li>
                        <li>E : Get Link</li>
                        <li>R : Control</li>
                        <li>T : Radar</li>
                        <li>Y : Sensor</li>
                        <li>A : Set</li>
                        <li>S : Operation</li>
                        <li>D : Lookup</li>
                        <li>F : Pack Color</li>
                        <li>Z : Wait</li>
                        <li>X : Stop</li>
                        <li>C : End</li>
                        <li>V : Jump</li>
                        <li>U : Unit Bind</li>
                        <li>I : Unit Control</li>
                        <li>O : Unit Radar</li>
                        <li>P : Unit Locate</li>
                    </ul>
                <li>Ctrl + Alt + S : Toggle Cursor mode</li>
                <ul>
                    While in Cursor Mode 
                    <li>Up Arrow : Go up an instruction </li>
                    <li>Down Arrow : Go down an instruction</li>
                    <li>Alt + Left Arrow : Move to the previous field</li>
                    <li>Alt +  Right Arrow : Move to the next field</li>
                    <li>Shift + Arrow Up/Down : Select multiple instructions</li>
                    <li>Delete : Delete the selected instruction(s)</li>
                    <li>Ctrl + C : Copy the selected instruction(s)</li>
                    <li>Ctrl + X : Cut the selected instruction(s)</li>
                    <li>Ctrl + V : Paste the copied instruction(s)</li>
                    <li>Alt + Arrow Up/Down : move the selected in instruction(s)</li>
                </ul>
            </ul>
            <br>
            <!-- <ul>
            <h3>Instructions</h3>
            <li>Use arrow keys to navigate through instructions.</li>
            <li>Press Tab to cycle through fields on the selected instruction.</li>
            <li>Use drag and drop to move instructions.</li>
            <li>Press Delete to remove the selected instruction.</li>
            <li>Press Enter to add a new instruction below the selected one.</li>
            </ul> -->
            <br>
            <ul>
                <h3>Saving and Loading</h3>
                <li>Uses localStorage to store and save your code</li>
                click the "Saves" button
                <ul>
                    <li>if there are any code stored you will see its name in the inner box</li>
                    <li>Save current : save your current code on the workspace.</li>
                    Will prompt you for name, if left empty default to `save1`, `save2`, ...
                    <li>Load Selected : You can select your saves by clicking them, Load selected will Load the first selected saves</li>
                    <li>Delete Selected : Delete all selected saves</li>
                    <li>Timeline : shows a timeline of your work (autosave timeline).</li>
                    Will show an icon on the bottom right when autosaving
                </ul>
            </ul>
            <br>
            <ul>
                <h3>Settings</h3>
                Gear icon on the top right
                <li><h4>Autosave</h4></li>
                <ul>
                    <li>Autosave : Whether to enable autosave or not</li>
                    <li>Interval : Interval (in seconds) between autosaves</li>
                    <li>Buffer : Determines how much autosave can be performed before deleting old autosaves
                        <span style="color: red;">(large buffer will take more of your storage space)</span>
                    </li>
                </ul>
            </ul>
            <ul>
                <h3>Additional Features</h3>
                <li>Label blocks for jump instructions.</li>
                <li>Optional instructions: while, for, long operation.</li>
            </ul>
            <button class="closeMenuBtn" onclick="closeHelpWizard()"">Close</button>
        </div>
    </div>
    <div id="wizardMenu" class="menu" onclick="closeWizard()">
        <div class="AddMenu">
            <!-- <h2>Add</h2> -->
            <div class="addButtons">
                <div class="wizard-title">Input & Output<div class="line"></div></div>
                <div class="iNo gridButton">
                    <button class="addItems">Read</button>
                    <button class="addItems">Write</button>
                    <button class="addItems">Draw</button>
                    <button class="addItems">Print</button>
                    <button class="addItems">Format</button>
                </div>
                <div class="wizard-title">Block Control<div class="line"></div></div>
                <div class="blockControl gridButton">
                    <button class="addItems">Draw Flush</button>
                    <button class="addItems">Print Flush</button>
                    <button class="addItems">Get Link</button>
                    <button class="addItems">Control</button>
                    <button class="addItems">Radar</button>
                    <button class="addItems">Sensor</button>
                </div>
                <div class="wizard-title">Operation<div class="line"></div></div>
                <div class="operation gridButton">
                    <button class="addItems">Set</button>
                    <button class="addItems">Operation</button>
                    <button class="addItems">Lookup</button>
                    <button class="addItems">Pack Color</button>
                </div>
                <div class="wizard-title">Flow Control<div class="line"></div></div>
                <div class="flowControl gridButton">
                    <button class="addItems">Wait</button>
                    <button class="addItems">Stop</button>
                    <button class="addItems">End</button>
                    <button class="addItems">Jump</button>
                </div>
                <div class="wizard-title">Unit Control<div class="line"></div></div>
                <div class="unitControl gridButton">
                    <button class="addItems">Unit Bind</button>
                    <button class="addItems">Unit Control</button>
                    <button class="addItems">Unit Radar</button>
                    <button class="addItems">Unit Locate</button>
                </div>
                <div class="wizard-title">Extra<div class="line"></div></div>
                <div class="extra gridButton">
                    <button class="addItems">Noop</button>
                    <button class="addItems">Label</button>
                    <button class="addItems">Comment</button>
                </div>
            </div>
            <br>
            <button class="closeMenuBtn" onclick="closeWizard()"">Close</button>
        </div>
    </div>
    <div id="popUpMenuOutside" class="menu" onclick="closeMenu(event)">
        <div id="sensorMenu" class="popUpMenu">
            <div id="sensorMenuButtons">
                <img src="image/triangle.png" onclick="subSensorMenu(1,event)" alt="i cant find the item image on the game source">
                <img src="image/liquid.png" onclick="subSensorMenu(2,event)" alt="">
                <img src="image/tree.png" onclick="subSensorMenu(0,event)" alt="">
            </div>
            <div id="variables">
                <div>@totalItems</div>
                <div>@firstItem</div>
                <div>@totalLiquids</div>
                <div>@totalPower</div>
                <div>@itemCapacity</div>
                <div>@liquidCapacity</div>
                <div>@powerCapacity</div>
                <div>@powerNetStored</div>
                <div>@powerNetCapacity</div>
                <div>@powerNetIn</div>
                <div>@powerNetOut</div>
                <div>@ammo</div>
                <div>@ammoCapacity</div>
                <div>@health</div>
                <div>@maxHealth</div>
                <div>@heat</div>
                <div>@efficiency</div>
                <div>@progress</div>
                <div>@timescale</div>
                <div>@rotation</div>
                <div>@x</div>
                <div>@y</div>
                <div>@shootX</div>
                <div>@shootY</div>
                <div>@size</div>
                <div>@dead</div>
                <div>@range</div>
                <div>@shooting</div>
                <div>@boosting</div>
                <div>@mineX</div>
                <div>@mineY</div>
                <div>@mining</div>
                <div>@speed</div>
                <div>@team</div>
                <div>@type</div>
                <div>@flag</div>
                <div>@controlled</div>
                <div>@controller</div>
                <div>@name</div>
                <div>@payloadCount</div>
                <div>@payloadType</div>
                <div>@id</div>
                <div>@enabled</div>
                <div>@config</div>
                <div>@color</div>
            </div>
            <div id="items" style="display: none;">
                <div>@copper</div>
                <div>@lead</div>
                <div>@metaglass</div>
                <div>@graphite</div>
                <div>@sand</div>
                <div>@coal</div>
                <div>@titanium</div>
                <div>@thorium</div>
                <div>@scrap</div>
                <div>@silicon</div>
                <div>@plastanium</div>
                <div>@phase-fabric</div>
                <div>@surge-alloy</div>
                <div>@spore-pod</div>
                <div>@blast-compound</div>
                <div>@pyratite</div>
                <div>@beryllium</div>
                <div>@tungsten</div>
                <div>@oxide</div>
                <div>@carbide</div>
                <div>@fissile-matter</div>
                <div>@dormant-cyst</div>
                <div>@gallium</div>
            </div>
            <div id="liquids" style="display: none;">
                <div>@water</div>
                <div>@slag</div>
                <div>@oil</div>
                <div>@cryofluid</div>
                <div>@neoplasm</div>
                <div>@arkycite</div>
                <div>@ozone</div>
                <div>@hydrogen</div>
                <div>@nitrogen</div>
                <div>@cyanogen</div>
            </div>
        </div>
        <div id="opMenu" class="popUpMenu">
            <div>+</div>
            <div>-</div>
            <div>*</div>
            <div>/</div>
            <div>//</div>
            <div>%</div>
            <div>^</div>
            <div>sqrt</div>
            <div>==</div>
            <div>not</div>
            <div>and</div>
            <div><</div>
            <div>></div>
            <div><=</div>
            <div>>=</div>
            <div>log</div>
            <div>log10</div>
            <div>abs</div>
            <div>floor</div>
            <div>ceil</div>
            <div>or</div>
            <div>b-and</div>
            <div>xor</div>
            <div>flip</div>
            <div>max</div>
            <div>min</div>
            <div>angle</div>
            <div>anglediff</div>
            <div>len</div>
            <div>noise</div>
            <div>rand</div>
            <div>sin</div>
            <div>cos</div>
            <div>tan</div>
            <div>asin</div>
            <div>acos</div>
            <div>atan</div>
        </div>
        <div id="drawMenu" class="popUpMenu">
            <div>clear</div>
            <div id="drawColor">color</div>
            <div>col</div>
            <div>stroke</div>
            <div>line</div>
            <div>rect</div>
            <div>lineRect</div>
            <div>poly</div>
            <div>linePoly</div>
            <div>triangle</div>
            <div>image</div>
            <div>print</div>
            <div>translate</div>
            <div>scale</div>
            <div>rotate</div>
            <div>reset</div>
        </div>
        <div id="drawMenuAlign" class="popUpMenu">
            <div>center</div>
            <div>top</div>
            <div>bottom</div>
            <div>left</div>
            <div>right</div>
            <div>topLeft</div>
            <div>topRight</div>
            <div>bottomLeft</div>
            <div>bottomRight</div>
        </div>
        <div id="controlMenu" class="popUpMenu">
            <div>enabled</div>
            <div>shoot</div>
            <div>shootp</div>
            <div>config</div>
            <div id="controlColor">color</div>
        </div>
        <div id="radarMenuTarget" class="popUpMenu">
            <div>any</div>
            <div>enemy</div>
            <div>ally</div>
            <div>player</div>
            <div>attacker</div>
            <div>flying</div>
            <div>boss</div>
            <div>ground</div>
        </div>
        <div id="radarMenuSort" class="popUpMenu">
            <div>distance</div>
            <div>health</div>
            <div>shield</div>
            <div>armor</div>
            <div>maxHealth</div>
        </div>
        <div id="lookupMenu" class="popUpMenu">
            <div>block</div>
            <div>unit</div>
            <div>item</div>
            <div>liquid</div>
        </div>
        <div id="jumpMenu" class="popUpMenu">
            <div>==</div>
            <div>not</div>
            <div><</div>
            <div><=</div>
            <div>></div>
            <div>>=</div>
            <div>===</div>
            <div>always</div>
        </div>
        <div id="ubindMenu" class="popUpMenu">
            <div>@dagger</div>	
            <div>@mace</div>	
            <div>@fortress</div>
            <div>@scepter</div>	
            <div>@reign</div>	
            <div>@nova</div>
            <div>@pulsar</div>	
            <div>@quasar</div>	
            <div>@vela</div>
            <div>@corvus</div>	
            <div>@crawler</div>	
            <div>@atrax</div>
            <div>@spiroct</div>	
            <div>@arkyid</div>	
            <div>@toxopid</div>
            <div>@flare</div>	
            <div>@horizon</div>	
            <div>@zenith</div>
            <div>@antumbra</div>	
            <div>@eclipse</div>	
            <div>@mono</div>
            <div>@poly</div>	
            <div>@mega</div>	
            <div>@quad</div>
            <div>@oct</div>	
            <div>@risso</div>	
            <div>@minke</div>
            <div>@bryde</div>	
            <div>@sei</div>	
            <div>@omura</div>
            <div>@retusa</div>	
            <div>@oxynoe</div>	
            <div>@cyerce</div>
            <div>@aegires</div>	
            <div>@navanax</div>	
            <div>@alpha</div>
            <div>@beta</div>	
            <div>@gamma</div>	
            <div>@stell</div>
            <div>@locus</div>	
            <div>@precept</div>	
            <div>@vanquish</div>
            <div>@conquer</div>	
            <div>@merui</div>	
            <div>@cleroi</div>
            <div>@anthicus</div>	
            <div>@anthicus-missile</div>
            <div>@tecta</div>
            <div>@collaris</div>	
            <div>@elude</div>	
            <div>@avert</div>
            <div>@obviate</div>	
            <div>@quell</div>	
            <div>@quell-missile</div>
            <div>@disrupt</div>	
            <div>@disrupt-missile</div>
            <div>@renale</div>
            <div>@latum</div>	
            <div>@evoke</div>	
            <div>@incite</div>
            <div>@emanate</div>	
            <div>@scathe-missile</div>
        </div>
        <div id="ucontrolMenu" class="popUpMenu">
            <div>idle</div>
            <div>stop</div>
            <div>move</div>
            <div>approach</div> 
            <div>pathfind</div> 
            <div>autoPathfind</div>
            <div>boost</div> 
            <div>target</div> 
            <div>targetp</div> 
            <div>itemDrop</div> 
            <div>itemTake</div> 
            <div>payDrop</div>
            <div>payTake</div> 
            <div>payEnter</div>
            <div>mine</div> 
            <div>flag</div> 
            <div>build</div> 
            <div>getBlock</div> 
            <div>within</div> 
            <div>unbind</div>
        </div>
        <div id="ulocateFindMenu" class="popUpMenu">
            <div>building</div>
            <div>ore</div>
            <div>spawn</div>
            <div>damaged</div> 
        </div>
        <div id="ulocateGroupMenu" class="popUpMenu">
            <div>core</div>
            <div>storage</div>
            <div>generator</div>
            <div>turret</div>
            <div>factory</div>
            <div>repair</div>
            <div>battery</div>
            <div>reactor</div>
        </div>
    </div>
    <div class="placeHolder"></div>
    <!-- <div class="placementPreview"></div> -->
    <!-- debug container -->
    <!-- <div class="container">
        <div class="blockControl-container">
            <div class="block-header">
                <span>Control</span>
                <div class="controls">
                    <span id="lineNumber">1</span>
                    <span onclick="copy()">⚪</span>
                    <span onclick="Delete()">✕</span>
                </div>
            </div>
            <div class="block-content">
                <div class="code">
                    <span>set</span>
                    <span class="editable blockControl" contenteditable="true" onclick="popUpMenu(event,'controlMenu')">enabled</span>
                    <span>of</span>
                    <span class="editable blockControl" contenteditable="true">block1</span>
                    <span class="toggleableField">x</span>
                    <span class="editable blockControl toggleableField" contenteditable="true">0</span>
                    <span class="toggleableField">y</span>
                    <span class="editable blockControl toggleableField" contenteditable="true">0</span>
                    <span>to</span>
                    <span class="editable blockControl" contenteditable="true">0</span>
                </div>
            </div>
        </div>
    </div>` -->
    <div></div>
</body>
<footer>
    <!-- <button id="addItems">Add Items</button> -->
    <button class="help" id="help" onclick="openHelpWizard()">Help</button>
    <button class="saveButton" id="saveButton" onclick="openSaveMenu()">Saves</button>
    <button class="button" id="importCode" onclick="importCode()">Import Code</button>
    <button class="exportCode" id="exportCode" onclick="exportCode()">Export Code</button>
    <button class="addItemsMenu" id="openWizard" onclick="openWizard()">+ Add...</button>
</footer>

</html>


